
# Начало работы в Godot

> Плагин GamePush для Godot поддерживает версии 4.0 и выше.
## Установка плагина
1. Установите плагин через Godot Asset Library или скачав папку с проектом с GitHub.

2. Перейдите на панель плагинов в настройках проекта `Project -> Project Settings -> Plugins` и включите плагин GamePush
![Включение плагина](image-1.png)

## Настройка проекта
1. Перейдите в панель настройки плагина `Project -> Project Settings -> Game Push -> Config`
![Настройки плагина](image.png)

2. В настройках плагина введите публичный ключ (`token`) и id проекта (`Project ID`) из панели управления game push
3. Если хотите показать рекламу сразу же при открытии игры, то поставьте галку `Is Preloader Show`
4. Если хотите вызвать событие GameReady автоматически сразу после инициализации плагина укажите задержку 0. Если хотите отложить событие GameReady укажите задержку в секундах. Если хотите отключить автоматическое срабатывание GameReady - укажите любое отрицательное значение.
5. Если хотите автоматически сохранять ваш web билд в архив - поставьте галку `Is Archive`. Можете указать также имя архива. 
> Для корректного архивирования убедитесь, что в папке для экспорта проекта нет файлов кроме самого архива и файлов проекта. Перед первым экспортом папка должна быть пустой. 

## Использование
Вам доступен синглтон `GP` в котором находятся модули GamePush. Вы можете обращаться к модулям через синглтон из любого скрипта вашего проекта.

### Инициализация
Для использования плагина требуется дождаться инициализации библиотеки game push. Подпишитесь на сигнал `GP.init(success:bool)`.

#### Пример ожидания инициализации

```gdscript
func _ready():
    # Если плагин GamePush загрузился до инициализации этой сцены
	if GP.is_inited:
		go_to_main_scene()
		return
	GP.inited.connect(go_to_main_scene)


func go_to_main_scene(_is_success_init:bool=false):
	# Переходим на основную сцену проекта, например главное меню
	get_tree().change_scene_to_file("res://path/to/your/scene.tscn")
```
### Показ рекламы с вознаграждением 

```gdscript
func _ready():
	GP.Ads.rewarded_reward.connect(add_25_coins)
	GP.Ads.rewarded_close.connect(func(success):
		if !success:
			GP.Logger.log("Close ads without reward") )

func add_25_coins():
    # При удачном просмотре рекламы - игрок получает 25 монет
	GP.Player.add_value("coins", 25)

func show_reward_ad():
    # Показываем видео-рекламу с вознаграждением
    # Парамет true отвечает за отображение обратного отсчета перед показом видео.
	GP.Ads.show_rewarded_video(true)

```

## Примечания

1. С плагином идёт демо проект, в котором можно посмотреть примеры использования методов плагина.
2. Плагин во многом повторяет структуру JS библиотеки, можно использовать документацию для большего понимания. 
